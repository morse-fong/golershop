(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["member-product-return"],{4443:function(e,t,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("aa9c");var n=i(a("9b1b")),r=a("8f59"),o={data:function(){return{dataInfo:{},CommentImgList:[],isDisable:!1,show:!1,Info:"",is_data:!1,param:{},return_reason_id:0,return_reason_name:"",returnReasonList:[],index:0,order_item_id:"",return_buyer_message:"",return_refund_amount:"",return_item_num:"",return_tel:""}},computed:(0,r.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"]),onLoad:function(e){uni.setNavigationBarTitle({title:this.__("售后申请")}),this.setData({order_item_id:e.order_item_id}),this.refreshData(e)},methods:(0,n.default)((0,n.default)({},(0,r.mapMutations)(["login","logout","getPlantformInfo","forceUserInfo","getUserInfo"])),{},{refreshData:function(e){var t=this,a={order_id:e.order_id,order_item_id:e.order_item_id};t.$.request({url:this.Config.URL.user.return_item,data:a,success:function(e,i,n,r){e.comment_image=[],200==i&&(t.setData({dataInfo:e,is_data:!0,param:a,returnReasonList:e.return_reason_list,return_reason_id:e.return_reason_list[0].return_reason_id,return_reason_name:e.return_reason_list[0].return_reason_name}),t.return_item_num=t.dataInfo.can_refund_num,t.return_refund_amount=t.dataInfo.can_refund_amount,t.return_tel=t.userInfo.user_mobile)}})},inputOpinion:function(e){var t=this.param;t.return_buyer_message=e.detail.value,this.setData({param:t})},bindPickerChange:function(e){this.index=e.target.value;this.return_reason_id=this.returnReasonList[this.index].return_reason_id,this.return_reason_name=this.returnReasonList[this.index].return_reason_name},upImgs:function(e){var t=this,a=this.dataInfo;a.comment_image&&9==a.comment_image.length?t.$.alert("最多上传9张图片！"):t.$.chooseImage({count:1,sizeType:["compressed"],success:function(e){t.$.showLoading();var i=e.tempFilePaths;t.$.uploadFile({url:t.Config.URL.upload,method:"POST",filePath:i[0],name:"upfile",success:function(e){t.$.hideLoading();var i=t.$.parseJSON(e.data),n=i.data.file_url;a.comment_image.push(n),t.setData({dataInfo:a})},fail:function(e){t.$.hideLoading()},complete:function(e){t.$.hideLoading()}})},fail:function(e){t.$.hideLoading()},complete:function(e){t.$.hideLoading()}})},delImg:function(e){var t=this.dataInfo,a=this;a.$.confirm("是否放弃上传本张图片?",(function(i){if(i.confirm){for(var n=[],r=0;r<t.comment_image.length;r++)if(r!=e.target.dataset.index){var o=t.comment_image[r];n.push(o)}t.comment_image=n,a.setData({dataInfo:t})}}),!0)},submitComment:function(e){var t=this,a=this.dataInfo;t.return_refund_amount<=0?t.$.alert("退款金额必填！"):t.return_item_num>t.dataInfo.can_refund_num?t.$.alert("退货数量必须小于等于可退数量！"):t.$.confirm("确认退货?",(function(e){if(e.confirm){var i={order_id:a.order_id,order_item_id:t.order_item_id,return_refund_amount:t.return_refund_amount,return_item_num:t.return_item_num,return_buyer_message:t.return_buyer_message,return_item_image:a.comment_image,refund_type:2,return_tel:t.return_tel,return_reason_id:t.return_reason_id};t.$.request({url:t.Config.URL.user.return_add_one,data:i,method:"POST",success:function(e,a,i,n){200==a?t.$.alert("申请退货成功！",(function(){var a=t.$.sprintf("/member/member/returndetail?return_id=%s",e.return_id);t.$.gopage(a)})):t.$.showToast({title:i,icon:"error",error:function(){}})}})}}),!0)},ImgTap:function(e){var t=[];for(var a in this.dataInfo.comment_image)t.push(this.dataInfo.comment_image[a]);var i=e.target.dataset.src;this.$.previewImage({current:i,urls:t})}})};t.default=o},"45ac":function(e,t,a){"use strict";a.r(t);var i=a("b3ea"),n=a("85fe");for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("61dd");var o=a("828b"),s=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"4c6df9a2",null,!1,i["a"],void 0);t["default"]=s.exports},"61dd":function(e,t,a){"use strict";var i=a("bb83"),n=a.n(i);n.a},"85fe":function(e,t,a){"use strict";a.r(t);var i=a("4443"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},b3ea:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{class:e.show?"cover":"",staticStyle:{"z-index":"2"}}),e.is_data?a("v-uni-view",{staticClass:"m-box"},[a("v-uni-view",{staticClass:"m-box-item",staticStyle:{"z-index":"1"}},[a("v-uni-view",{staticClass:"m-title"},[a("v-uni-view",{staticClass:"m-pimg",staticStyle:{width:"96rpx"}},[a("v-uni-image",{attrs:{"lazy-load":!0,mode:"scaleToFill",src:e.dataInfo.order_item_image}})],1),a("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#888",float:"left",width:"614rpx"}},[a("v-uni-label",[e._v(e._s(e.dataInfo.item_name))]),a("v-uni-label",[e._v(e._s(e.__("￥"))+e._s(e.dataInfo.order_item_sale_price)+" x "+e._s(e.dataInfo.order_item_quantity))])],1)],1),a("v-uni-view",{staticClass:"m-text"},[a("v-uni-textarea",{staticStyle:{"z-index":"2"},attrs:{"auto-height":!0,placeholder:e.__("退货备注"),"placeholder-class":"placeholder-class",maxlength:"200"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputOpinion.apply(void 0,arguments)}},model:{value:e.return_buyer_message,callback:function(t){e.return_buyer_message=t},expression:"return_buyer_message"}})],1),a("v-uni-view",{staticClass:"m-upImg"},[e._l(e.dataInfo.comment_image,(function(t,i){return a("v-uni-view",{key:i,staticClass:"m-upImg-item"},[a("v-uni-image",{attrs:{"lazy-load":!0,mode:"aspectFit",src:t},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ImgTap.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"u-del-item",attrs:{"data-index":i},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.delImg.apply(void 0,arguments)}}},[a("v-uni-label",{staticClass:"iconfont icon-delete",attrs:{"data-index":i}})],1)],1)})),a("v-uni-view",{staticClass:"m-upImg-item upSelect",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.upImgs.apply(void 0,arguments)}}},[a("v-uni-label",{staticClass:"iconfont icon-xiangji"})],1)],2)],1)],1):e._e(),a("v-uni-view",{staticClass:"m-VComment"},[a("v-uni-view",{staticClass:"m-VConmmenBox"},[a("v-uni-view",{staticClass:"m-label"},[e._v(e._s(e.__("退款原因")))]),a("v-uni-view",{staticClass:"m-cell-bd"},[a("v-uni-picker",{attrs:{value:e.index,range:e.returnReasonList,"range-key":"return_reason_name"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.return_reason_name))])],1)],1)],1),a("v-uni-view",{staticClass:"m-VConmmenBox"},[a("v-uni-view",{staticClass:"m-label"},[e._v(e._s(e.__("退货数量")))]),a("v-uni-view",{staticClass:"m-startBox"},[a("v-uni-input",{staticStyle:{"line-height":"80rpx",height:"80rpx"},attrs:{type:"number",placeholder:e.__("请输入退货数量"),"placeholder-class":"placeholder-class",disabled:"true"},model:{value:e.return_item_num,callback:function(t){e.return_item_num=t},expression:"return_item_num"}})],1),a("v-uni-view",{staticClass:"m-label m-right"},[e._v(e._s(e.sprintf(e.__("可退数量 %s"),e.dataInfo.can_refund_num)))])],1),a("v-uni-view",{staticClass:"m-VConmmenBox"},[a("v-uni-view",{staticClass:"m-label"},[e._v(e._s(e.__("退款金额")))]),a("v-uni-view",{staticClass:"m-startBox"},[a("v-uni-input",{staticStyle:{"line-height":"80rpx",height:"80rpx"},attrs:{type:"digit",placeholder:e.__("请输入退款金额"),"placeholder-class":"placeholder-class",disabled:"true"},model:{value:e.return_refund_amount,callback:function(t){e.return_refund_amount=t},expression:"return_refund_amount"}})],1),a("v-uni-view",{staticClass:"m-label m-right"},[e._v(e._s(e.sprintf(e.__("可退金额 ￥ %s"),e.dataInfo.can_refund_amount)))])],1),a("v-uni-view",{staticClass:"m-VConmmenBox"},[a("v-uni-view",{staticClass:"m-label"},[e._v(e._s(e.__("联系方式")))]),a("v-uni-view",{staticClass:"m-startBox"},[a("v-uni-input",{staticStyle:{"line-height":"80rpx",height:"80rpx"},attrs:{type:"number",placeholder:e.__("请输入联系方式"),"placeholder-class":"placeholder-class"},model:{value:e.return_tel,callback:function(t){e.return_tel=t},expression:"return_tel"}})],1)],1)],1),a("v-uni-view",{staticStyle:{height:"120rpx"}}),e.isDisable?e._e():a("v-uni-view",{staticClass:"m-submitComment"},[a("v-uni-view",{staticClass:"m-subBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitComment.apply(void 0,arguments)}}},[e._v(e._s(e.__("提交退货申请")))])],1),e.show?a("v-uni-view",{staticClass:"alert",staticStyle:{"z-index":"3"}},[a("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{"lazy-load":!0,src:"/static/images/true.png"}}),a("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(e.Info))])],1):e._e()],1)},n=[]},bb83:function(e,t,a){var i=a("e277");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("967d").default;n("6b930adb",i,!0,{sourceMap:!1,shadowMode:!1})},e277:function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-4c6df9a2]:export{theme_bg:#1db0fc}.m-box-item[data-v-4c6df9a2]{margin-bottom:%?20?%}.m-title[data-v-4c6df9a2]{box-sizing:border-box;height:%?260?%;background-color:#fff;border-bottom:1px solid #eee;padding:%?20?%;height:%?120?%;display:inline-flex}.m-pimg[data-v-4c6df9a2]{width:%?90?%;height:%?90?%;background-color:#f4a460;margin-right:%?20?%;vertical-align:middle;float:left}.m-pimg uni-image[data-v-4c6df9a2]{width:100%;height:100%}.m-start[data-v-4c6df9a2]{height:%?70?%;display:inline-block;vertical-align:middle;line-height:%?70?%;float:left}.m-label[data-v-4c6df9a2]{font-size:%?28?%;color:#333;vertical-align:middle;margin-right:%?10?%;display:inline-block;line-height:%?80?%;height:%?80?%;width:%?120?%}.m-startBox[data-v-4c6df9a2]{display:inline-block;\r\n  /* color: #eee; */width:%?360?%}.m-startBox uni-label[data-v-4c6df9a2]{padding:0 5px;font-size:%?36?%}.m-right[data-v-4c6df9a2]{width:%?260?%;color:#36bc9b;font-size:%?26?%}.sel[data-v-4c6df9a2]{color:#1db0fc}.m-VComment[data-v-4c6df9a2]{background-color:#fff;padding:%?20?%;margin-top:%?20?%}.m-VConmmenBox[data-v-4c6df9a2]{\r\n  /* margin-bottom: 10rpx; */display:inline-flex}.m-VConmmenBox[data-v-4c6df9a2]:first-child{\r\n  /* margin-bottom: 10rpx; */display:inline-flex}.m-text[data-v-4c6df9a2]{box-sizing:border-box;padding:%?10?% %?10?% 0 %?10?%;background-color:#fff;font-size:%?24?%;min-height:%?100?%;font-size:%?28?%;line-height:%?40?%}.m-text uni-textarea[data-v-4c6df9a2]{width:100%;height:100%}.m-upImg[data-v-4c6df9a2]{box-sizing:border-box;padding:%?20?%;background-color:#fff}.m-upImg-item[data-v-4c6df9a2]{width:%?120?%;height:%?120?%;border:1px solid #eee;display:inline-block;margin:%?9?%;border-radius:%?4?%;vertical-align:middle;position:relative}.m-upImg-item uni-image[data-v-4c6df9a2]{width:100%;height:100%}.u-del-item[data-v-4c6df9a2]{position:absolute;bottom:0;width:100%;height:%?40?%;background-color:rgba(0,0,0,.5);text-align:center;line-height:%?40?%;color:#fff;z-index:5}.u-del-item uni-label[data-v-4c6df9a2]{font-size:%?28?%}.upSelect[data-v-4c6df9a2]{background-color:#eee;text-align:center;line-height:%?120?%}.upSelect uni-label[data-v-4c6df9a2]{font-size:%?40?%}.m-submitComment[data-v-4c6df9a2]{position:fixed;height:%?100?%;width:100%;background-color:#fff;border-top:1px solid #eee;z-index:5;left:0;bottom:0}.m-subBtn[data-v-4c6df9a2]{float:right;padding:0 %?20?%;height:100%;background-color:#1db0fc;color:#fff;font-size:%?28?%;line-height:%?100?%}.m-media-box-desc[data-v-4c6df9a2]{display:block}.alert[data-v-4c6df9a2]{font-size:%?32?%;width:70%;padding:0 %?40?%;height:%?200?%;position:absolute;left:10%;top:40%;background:#fff;border-radius:%?10?%;justify-content:center;display:flex;align-items:center;z-index:999}.cover[data-v-4c6df9a2]{position:fixed;width:100%;height:100%;top:0;background:rgba(0,0,0,.4);overflow:hidden;z-index:998}.uni-input[data-v-4c6df9a2]{padding-left:0}',""]),e.exports=t}}]);